# MCRTA – Módulo 1

# Fundamentos de Multi-Cloud Red Teaming

**Versión en Markdown profesional**

---

## 1. Introducción al Módulo

El mercado actual utiliza arquitecturas híbridas y multi-cloud. Para un Red Team, esto significa que la superficie de ataque ya no está centralizada en un solo proveedor, sino distribuida entre AWS, Azure y Google Cloud Platform.  
Este módulo establece las bases técnicas y conceptuales para comprender cómo funcionan estas plataformas, dónde suelen fallar las configuraciones y cómo se alinean con la filosofía ofensiva del Red Team.

Objetivos del módulo:

- Comprender la arquitectura multi-cloud y sus implicaciones en seguridad.
    
- Analizar el modelo de responsabilidad compartida para cada proveedor.
    
- Identificar superficies de ataque comunes en AWS, Azure y GCP.
    
- Revisar los cimientos del control de acceso basado en roles en nubes modernas.
    
- Preparar el entorno y las herramientas necesarias para los siguientes módulos prácticos.
    

---

## 2. ¿Qué es Multi-Cloud Red Teaming?

**Multi-Cloud Red Teaming** es la práctica de ejecutar operaciones ofensivas contra ambientes cloud que incluyen dos o más proveedores simultáneamente.

Características clave:

- Permite evaluar configuraciones reales de empresas que distribuyen sus cargas entre AWS, Azure y GCP.
    
- Abarca identidades, permisos, redes, almacenamiento, computación, logs y servicios administrados.
    
- El enfoque del Red Team se centra en:
    
    - Identificar errores de configuración.
        
    - Encadenar permisos débiles.
        
    - Pivotar entre proveedores.
        
    - Obtener acceso persistente con bajo perfil (OPSEC).
        

Un operador MCRTA necesita conocer patrones ofensivos universales, además de particularidades de cada nube.

---

## 3. Arquitectura Multi-Cloud en Empresas Modernas

Las organizaciones utilizan múltiples nubes por motivos como resiliencia, costos, disponibilidad geográfica o servicios exclusivos. Como resultado:

- Los activos están distribuidos en distintos proveedores.
    
- Las identidades pueden federarse entre plataformas.
    
- Es frecuente encontrar **errores de configuración encadenados** que permiten pivotar de una nube a otra.
    
- La visibilidad y monitoreo se fragmentan, lo que crea brechas aprovechables durante un ejercicio ofensivo.
    

Ejemplo de ataques reales que involucran multi-cloud:

- Permisos excesivos en AWS IAM que permiten leer credenciales de aplicaciones conectadas a Azure.
    
- Buckets públicos en GCP que contienen claves API reutilizables para servicios en Azure.
    
- Identidades federadas mal configuradas entre Azure AD y AWS STS.
    

---

## 4. Modelo de Responsabilidad Compartida

El modelo de responsabilidad compartida define qué controla el proveedor y qué controla el cliente. Entender esto es fundamental para un Red Team, porque determina _dónde_ buscar fallos que realmente representan un riesgo atribuible al cliente.

### 4.1 Amazon Web Services

- AWS gestiona infraestructura física, hardware, hipervisores, redes base.
    
- El cliente es responsable de:
    
    - IAM.
        
    - Configuración de redes (VPC, SG, ACL).
        
    - Control de acceso a S3, Lambda, EC2.
        
    - Logs, auditoría y monitorización.
        

### 4.2 Microsoft Azure

- Azure gestiona centros de datos, red, hardware, hosts.
    
- El cliente gestiona:
    
    - Azure AD y RBAC.
        
    - Configuraciones de redes (VNets, NSG).
        
    - Acceso a Storage, App Services, VMs.
        
    - Configuración de diagnóstico y logging.
        

### 4.3 Google Cloud Platform

- GCP gestiona infraestructura física y servicios administrados.
    
- El cliente es responsable de:
    
    - Service Accounts.
        
    - IAM granular.
        
    - Redes (VPC, firewall rules).
        
    - Auditoría, logging, retención de eventos.
        

Conclusión: la mayoría de los compromisos en cloud ocurren **porque el cliente configuró mal algo que sí estaba bajo su control**.

---

## 5. Superficies de Ataque Comunes en Multi-Cloud

Aunque cada nube tiene sus mecanismos propios, existen patrones ofensivos universales que un analista MCRTA debe dominar.

### 5.1 Identidades y permisos (IAM / RBAC / Service Accounts)

- Roles demasiado permisivos.
    
- Políticas con comodines “*”.
    
- Permisos indirectos que permiten privilege escalation.
    
- Identidades huérfanas o sin rotación.
    
- Claves API expuestas.
    

### 5.2 Almacenamiento

- Buckets públicos o mal configurados.
    
- Permisos heredados incorrectos.
    
- Versionado desactivado, lo que permite manipular sin historial.
    
- Bucket enumeration y access control bypass.
    

### 5.3 Compute (VMs, funciones serverless, contenedores)

- Acceso a metadata services (IMDS/Metadata Server).
    
- Roles asociadas a instancias que exponen permisos altos.
    
- Contenedores con permisos privilegiados.
    

### 5.4 Redes

- Firewalls permisivos.
    
- Exposición de endpoints administrativos.
    
- Falta de segmentación interna.
    
- Redes híbridas conectadas sin control granular.
    

### 5.5 Logging y visibilidad

- CloudTrail, Azure Monitor o Cloud Logging deshabilitados o incompletos.
    
- Bucket de logs accesible o sin cifrado.
    
- Retención insuficiente.
    

---

## 6. IAM Universal: El Lenguaje Común del Cloud Red Teaming

A pesar de las diferencias, todas las nubes utilizan algún sistema de control basado en políticas:

- **AWS IAM**: políticas JSON asociadas a usuarios, grupos o roles.
    
- **Azure RBAC**: asignación de roles a identidades de Azure AD.
    
- **GCP IAM**: bindings que conectan Service Accounts con permisos.
    

Un atacante busca siempre:

1. Enumerar identidades.
    
2. Identificar permisos útiles.
    
3. Detectar rutas de escalada.
    
4. Ejecutar acciones que abren la puerta a compromisos mayores.
    

Ejemplos ofensivos:

```
AWS: iam:PassRole → lambda:CreateFunction → privilege escalation
Azure: Owner role en una suscripción → movimiento lateral amplio
GCP: roles/iam.serviceAccountTokenCreator → impersonación
```

---

## 7. Herramientas Base para el Curso

### 7.1 AWS CLI

Instalación mínima y configuración con access keys para enumerar recursos.

### 7.2 Azure CLI

Interacción con Azure AD y recursos RBAC desde línea de comandos.

### 7.3 Google Cloud SDK (gcloud)

Enumeración de Service Accounts, buckets, VMs y roles.

### 7.4 jq

Manipulación de JSON en terminal, útil para análisis rápido de políticas.

### 7.5 Python (opcional)

Automatización de tareas ofensivas sin necesidad de herramientas adicionales.

Estas herramientas son la base del laboratorio del Módulo 2, donde veremos credenciales y enumeración inicial.

---

## 8. Preparación del Entorno

El entorno base para avanzar en el curso debe incluir:

- Maquina Linux o Windows con:
    
    - AWS CLI instalado
        
    - Azure CLI instalado
        
    - gcloud SDK configurado
        
    - jq
        
- Acceso a cuentas de práctica o entornos sandbox.
    
- Editor de texto para revisión de políticas: nano, vim, VS Code, etc.
    

Confirmación mínima:

```
aws --version
az version
gcloud --version
jq --version
```

Si las cuatro herramientas responden, el entorno está listo para iniciar la parte práctica.

---

## 9. Resumen Final del Módulo

Este módulo establece los cimientos conceptuales para operar en entornos multi-cloud desde una mentalidad ofensiva:

- Conoces el marco general de Red Teaming multi-cloud.
    
- Comprendes las responsabilidades de cliente y proveedor.
    
- Identificas superficies de ataque que se repiten en todas las nubes.
    
- Entiendes que IAM es el núcleo de la seguridad en cloud.
    
- Has preparado el entorno para ejecutar comandos prácticos en el siguiente módulo.
    